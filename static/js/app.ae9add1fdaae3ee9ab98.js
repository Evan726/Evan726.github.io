webpackJsonp([9],{"6f/g":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("hi0L"),a=n("VDdn"),i={data:function(){return{sideWidth:200,clientHeight:500}},components:{LayoutHeader:o.default,LayoutSide:a.default},mounted:function(){var e=this,t=document.body.clientHeight-50;this.clientHeight=t,this.$store.commit("clientHeight",t),window.onresize=function(){var t=document.body.clientHeight-50;e.clientHeight=t,e.$store.commit("clientHeight",t)}},methods:{sideCall:function(){200===this.sideWidth?this.sideWidth=65:this.sideWidth=200}}},r={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("el-container",[n("el-header",{attrs:{height:"50"}},[n("layout-header",{on:{call:e.sideCall}})],1),e._v(" "),n("el-container",{staticClass:"main",style:{height:e.clientHeight+"px"}},[n("el-aside",{attrs:{width:e.sideWidth+"px"}},[n("layout-side",{attrs:{isCollapse:200!==e.sideWidth,clientHeight:e.clientHeight}})],1),e._v(" "),n("el-main",[n("div",{staticClass:"bread"},[n("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[n("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),n("el-breadcrumb-item",[e._v("活动管理")]),e._v(" "),n("el-breadcrumb-item",[e._v("活动列表")]),e._v(" "),n("el-breadcrumb-item",[e._v("活动详情")])],1)],1),e._v(" "),n("router-view")],1)],1)],1)},staticRenderFns:[]};var c=n("VU/8")(i,r,!1,function(e){n("Iwmt")},"data-v-622a3f1b",null);t.default=c.exports},A66B:function(e,t,n){e.exports=function(e){return function(){return n("Opzk")("./"+e+".vue")}}},EIhT:function(e,t){},II8O:function(e,t){},Iwmt:function(e,t){},NHnr:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("7+uW"),a={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},staticRenderFns:[]};var i=n("VU/8")({name:"App"},a,!1,function(e){n("pTUr")},null,null).exports,r=n("/ocq"),c=n("6f/g"),s=n("A66B");o.default.use(r.a);var u=[{path:"/login",component:s("login/index"),hidden:!0},{path:"/404",component:s("errorPage/index"),hidden:!0}],l=new r.a({routes:u}),d=[{path:"/icon",component:c.default,redirect:"/icon",children:[{path:"",component:s("svg-icons/index"),name:"icons",meta:{title:"icons",icon:"icon",noCache:!0}}]},{path:"/components",component:c.default,redirect:"/components/tinymce",meta:{title:"组件",icon:"component"},children:[{path:"tinymce",component:s("components/tinymce"),name:"tinymce",meta:{title:"编辑器"}},{path:"avatar-upload",component:s("components/avatarUpload"),name:"avatarUpload",meta:{title:"上传头像"}}]}],m=n("NYxO"),p=n("//Fk"),h=n.n(p),f=n("mtWM"),v=n.n(f).a.create({timeout:5e3});v.interceptors.request.use(function(e){return e},function(e){return h.a.reject(e)}),v.interceptors.response.use(function(e){return e},function(e){return h.a.reject(e)});var g=v;var _=function(){return sessionStorage.getItem("admin-token")},R={state:{roles:[],token:"",introduction:"",avatar:"",name:""},mutations:{SET_TOKEN:function(e,t){e.token=t},SET_INTRODUNCTION:function(e,t){e.introduction=t},SET_AVATAR:function(e,t){e.avatar=t},SET_ROLES:function(e,t){e.roles=t},SET_NAME:function(e,t){e.name=t}},actions:{LoginByUsername:function(e,t){var n=e.commit;return new h.a(function(e,o){var a;(a=t,g({url:"pl/login",method:"post",data:a})).then(function(t){var o,a=t.data;n("SET_TOKEN",a.token),o=t.data.token,sessionStorage.setItem("admin-token",o),e()}).catch(function(e){o(e)})})},GetUserInfo:function(e,t){var n=e.commit;e.state;return new h.a(function(e,o){(function(e){return g({url:"user/info",method:"get",params:{token:e}})})(t).then(function(t){t.data||o("error");var a=t.data;n("SET_NAME",a.name),n("SET_AVATAR",a.avatar),n("SET_INTRODUNCTION",a.introduction),e(t)}).catch(function(e){o(e)})})},logout:function(e){var t=e.commit;e.state;return new h.a(function(e,n){g({url:"login/logout",method:"post"}).then(function(n){t("SET_TOKEN",""),t("SET_NAME",""),sessionStorage.removeItem("admin-token"),e()}).catch(function(e){n()})})}}},I={token:function(e){return e.user.token},avatar:function(e){return e.user.avatar},name:function(e){return e.user.name},introduction:function(e){return e.user.introduction},status:function(e){return e.user.status},roles:function(e){return e.user.roles},menuData:function(e){return e.router_url.menuData},addRouters:function(e){return e.router_url.addRouters}},w={},x={clientHeight:function(e,t){e.clientHeight=t}};var N=n("A66B");var b={state:{routers:[],menuData:[],addRouters:[]},mutations:{SET_ROUTERS:function(e,t){e.routers=t,e.menuData=function e(t,n){for(var o=[],a=0;a<t.length;a++)t[a].children?o.push({path:t[a].Route,Name:t[a].Name,children:e(t[a].children,t[a].Route)}):o.push({path:n?n+"/"+t[a].Route:t[a].Route,Name:t[a].Name,children:[]});return o}(t),e.addRouters=function e(t){for(var n=[],o=0;o<t.length;o++)if(t[o].children){r=[];for(var a=t[o].children,i=0;i<a.length;i++)r.push({path:a[i].Route,component:N(a[i].File),name:a[i].Name,meta:{title:a[i].Name,icon:a[i].icon},children:a[i].children?e(a[i].children):null});n.push({path:t[o].Route,component:c.default,redirect:t[o].Route+"/"+a[0].Route,meta:{},children:r})}else{var r;(r=[]).push({path:"",component:N(t[o].File),name:t[o].Name,meta:{title:t[o].Name,icon:t[o].icon}}),n.push({path:t[o].Route,component:c.default,redirect:t[o].Route,meta:{title:t[o].Name,icon:t[o].icon},children:r})}return n}(t)}},actions:{GenerateRoutes:function(e){var t=e.commit;return new h.a(function(e,n){g({url:"getroute",method:"get"}).then(function(n){var o=n.data;t("SET_ROUTERS",o),e()}).catch(function(e){n(e)})})}}};o.default.use(m.a);var O=new m.a.Store({state:{},modules:{user:R,router_url:b},mutations:x,actions:w,getters:I}),y=n("zL8q"),C=n.n(y),T=(n("tvR6"),n("zNUS")),E=n.n(T);var S={admin:{roles:["admin"],token:"admin",introduction:"我是超级管理员",avatar:"https://wpimg.wallstcn.com/f778738c-e4f8-4870-b634-56703b4acafe.gif",name:"张三"},editor:{roles:["editor"],token:"editor",introduction:"我是编辑",avatar:"https://wpimg.wallstcn.com/f778738c-e4f8-4870-b634-56703b4acafe.gif",name:"李四"}},k=function(e){var t=JSON.parse(e.body).account;return S[t]},U=function(e){var t,n,o=(t=e.url,(n=t.split("?")[1])?(console.log("1",JSON.parse('{"'+decodeURIComponent(n).replace(/"/g,'\\"').replace(/&/g,'","').replace(/=/g,'":"')+'"}')),JSON.parse('{"'+decodeURIComponent(n).replace(/"/g,'\\"').replace(/&/g,'","').replace(/=/g,'":"')+'"}')):{}).token;return!!S[o]&&S[o]},H=function(){return"success"},V=[{File:"home/index",Icon:"home",IsView:!0,Name:"系统首页",Route:"/home",children:null},{File:"svg-icons/index",Icon:"icon",IsView:!0,Name:"Icon",Route:"/icon",children:null},{File:"",Icon:"components",IsView:!0,Name:"组件",Route:"/components",children:[{File:"components/tinymce",Icon:"tinymce",IsView:!0,Name:"编辑器",OrderIndex:0,Route:"tinymce",children:null},{File:"components/avatarUpload",Icon:"avatar",IsView:!0,Name:"上传头像",OrderIndex:0,Route:"avatar-upload",children:null},{File:"components/form/group",Icon:"form",IsView:!0,Name:"表单",OrderIndex:0,Route:"/components/form",children:[{File:"components/form/element",Icon:"element",IsView:!0,Name:"表单元素",OrderIndex:0,Route:"element",children:null},{File:"components/form/group",Icon:"group",IsView:!0,Name:"表单组合",OrderIndex:0,Route:"group",children:null}]}]}],A=function(e){return console.log("config",e),V};E.a.mock(/pl\/login/,"post",k),E.a.mock(/user\/info\.*/,"get",U),E.a.mock(/login\/logout/,"post",H),E.a.mock(/getroute/,"get",A);E.a;var F=n("Dd8w"),D=n.n(F),L=n("Y81h"),j=n.n(L),P=(n("UVIz"),["/login","/404"]);l.beforeEach(function(e,t,n){j.a.start(),console.log("store.getters.addRouters",O.getters.addRouters,"------------",d),_()?"/login"===e.path?(n({path:"/"}),j.a.done()):""===O.getters.name?O.dispatch("GetUserInfo",_()).then(function(t){O.dispatch("GenerateRoutes").then(function(t){console.log("store.getters.addRouters",O.getters.addRouters,"------------",d),l.addRoutes(O.getters.addRouters),console.log("-----2---",l),"/"===e.path?n({path:"/home"}):n(D()({},e,{replace:!0}))}).catch(function(e){console.log("error",e),O.dispatch("logout").then(function(){n({path:"/login"})})})}).catch(function(e){n({path:"/login"})}):n():-1!==P.indexOf(e.path)?n():(n("/login"),j.a.done())}),l.afterEach(function(){j.a.done()}),o.default.config.productionTip=!1,o.default.use(C.a),new o.default({el:"#app",router:l,store:O,components:{App:i},template:"<App/>"})},Opzk:function(e,t,n){var o={"./components/avatarUpload.vue":["czzu",7],"./components/form/element.vue":["icTJ",5],"./components/form/group.vue":["lMRu",0],"./components/tinymce.vue":["LkOT",3],"./errorPage/index.vue":["ODjX",1],"./home/index.vue":["KR8f",2],"./layout/components/LayoutHeader.vue":["hi0L"],"./layout/components/LayoutSide.vue":["VDdn"],"./layout/components/SideMenu/SidebarItem.vue":["tZTP"],"./layout/index.vue":["6f/g"],"./login/index.vue":["T+/8",6],"./svg-icons/index.vue":["SZpN",4]};function a(e){var t=o[e];return t?Promise.all(t.slice(1).map(n.e)).then(function(){return n(t[0])}):Promise.reject(new Error("Cannot find module '"+e+"'."))}a.keys=function(){return Object.keys(o)},a.id="Opzk",e.exports=a},UVIz:function(e,t){},VDdn:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("tZTP"),a={name:"LayoutSide",data:function(){return{}},props:{isCollapse:{type:Boolean},clientHeight:{type:Number}},components:{SidebarItem:o.default},computed:{routers:function(){return this.$store.getters.menuData}},mounted:function(){},methods:{handleOpen:function(e,t){console.log(e,t)},handleClose:function(e,t){console.log(e,t)}}},i={render:function(){var e=this.$createElement,t=this._self._c||e;return t("el-menu",{staticClass:"el-menu-vertical-demo",style:{height:this.clientHeight+"px"},attrs:{"default-active":this.$route.path,"background-color":"#20222A","text-color":"#fff",collapse:this.isCollapse,"collapse-transition":!1,router:!0},on:{open:this.handleOpen,close:this.handleClose}},[t("sidebar-item",{attrs:{data:this.routers}})],1)},staticRenderFns:[]};var r=n("VU/8")(a,i,!1,function(e){n("hJUx")},null,null);t.default=r.exports},hJUx:function(e,t){},hi0L:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n("Dd8w"),a=n.n(o),i=n("NYxO"),r={name:"LayoutHeader",data:function(){return{msg:"Welcome to Your Vue.js App"}},computed:a()({},Object(i.c)(["name","avatar"])),methods:{menuHandle:function(){this.$emit("call")},handleCommand:function(e){var t=this;"logout"===e&&this.$store.dispatch("logout").then(function(e){t.$router.push({path:"/login"})}).catch(function(e){console.log("error111",e)})}}},c={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"header_box flex"},[n("div",{staticClass:"logo"},[e._v("\n        logo\n    ")]),e._v(" "),n("div",{staticClass:"header_main"},[n("el-row",[n("el-col",{attrs:{span:16}},[n("ul",{staticClass:"flex head_icon_box"},[n("li",{on:{click:e.menuHandle}},[n("i",{staticClass:"el-icon-menu"})]),e._v(" "),n("li",[n("i",{staticClass:"el-icon-refresh"})])])]),e._v(" "),n("el-col",{attrs:{span:8}},[n("div",{staticClass:"flex user_info"},[n("ul",{staticClass:"flex head_icon_box"},[n("li",{staticClass:"flex"},[n("span",[e._v("评论")]),e._v(" "),n("el-badge",{staticClass:"mark",attrs:{value:12}})],1),e._v(" "),n("li",[n("i",{staticClass:"el-icon-menu"})]),e._v(" "),n("li",[n("i",{staticClass:"el-icon-menu"})]),e._v(" "),n("li",[n("i",{staticClass:"el-icon-menu"})]),e._v(" "),n("li",[n("el-dropdown",{on:{command:e.handleCommand}},[n("span",{staticClass:"el-dropdown-link"},[e._v("\n                                    "+e._s(e.name)),n("i",{staticClass:"el-icon-arrow-down el-icon--right"})]),e._v(" "),n("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[n("el-dropdown-item",[e._v("基本信息")]),e._v(" "),n("el-dropdown-item",[e._v("修改密码")]),e._v(" "),n("el-dropdown-item",{attrs:{command:"logout"}},[e._v("退出")])],1)],1)],1)])])])],1)],1)])},staticRenderFns:[]};var s=n("VU/8")(r,c,!1,function(e){n("II8O")},null,null);t.default=s.exports},pTUr:function(e,t){},tZTP:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o={name:"SidebarItem",data:function(){return{}},props:{data:{type:Array}},methods:{handleOpen:function(e,t){console.log(e,t)},handleClose:function(e,t){console.log(e,t)}}},a={render:function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e._l(e.data,function(t,o){return[t.children.length>0?[n("el-submenu",{attrs:{index:t.path}},[n("template",{slot:"title"},[n("i",{staticClass:"el-icon-location"}),e._v(" "),n("span",{attrs:{slot:"title"},slot:"title"},[e._v(e._s(t.Name))])]),e._v(" "),e._l(t.children,function(t){return[t.children.length>0?n("sidebar-item",{attrs:{data:[t]}}):n("router-link",{attrs:{to:t.path}},[n("el-menu-item",{attrs:{index:t.path}},[n("i",{staticClass:"el-icon-menu"}),e._v(" "),n("span",{attrs:{slot:"title"},slot:"title"},[e._v(e._s(t.Name))])])],1)]})],2)]:[n("router-link",{attrs:{to:t.path}},[n("el-menu-item",{attrs:{index:t.path}},[n("i",{staticClass:"el-icon-menu"}),e._v(" "),n("span",{attrs:{slot:"title"},slot:"title"},[e._v(e._s(t.Name))])])],1)]]})],2)},staticRenderFns:[]};var i=n("VU/8")(o,a,!1,function(e){n("EIhT")},null,null);t.default=i.exports},tvR6:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.ae9add1fdaae3ee9ab98.js.map